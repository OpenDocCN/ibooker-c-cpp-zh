# 序言

在新的 JavaScript 框架几乎每天都在涌现的世界里，为什么你会深入研究像 C 这样老旧、基础的语言呢？好吧，首先，如果你希望跟上所有这些框架的潮流（哎呀，意见警告），你可能需要了解一些提供了许多“现代”语言基础的老旧、基础技术。你是否在像[TIOBE](https://oreil.ly/ZTdwN)这样的网站上查看过流行的编程语言，发现 C 语言一直稳居榜首？也许你对于先进的视频卡感兴趣，并想了解驱动它们的软件如何工作。或者你正在探索像 Arduino 这样的新型、小型设备，并听说 C 语言是最适合的工具。

不管原因是什么，很高兴你能在这里。顺便说一句，所有这些理由都是合理的。C 语言是一门基础性语言，了解其语法和特性将使你拥有非常长久的计算机语言素养，有助于更轻松地掌握新的语言和风格。在撰写设备驱动程序或操作系统的低级代码时，C 语言（以及它的姐妹语言 C++）仍然广泛使用。而物联网正为资源有限的微控制器注入新生命。因此，C 语言非常适合在这些小型环境中发挥作用。

尽管我将专注于为这些小型、资源有限的机器编写干净、紧凑的代码，但我仍将从计算机编程的基础开始，并介绍适用于 C 语言的各种规则和模式。

# 如何使用本书

本书旨在覆盖所有适用于上述任何情况的良好 C 编程基础。我们将研究控制结构、运算符、函数以及 C 语法的其他元素，以及能够减少编译程序大小的替代模式示例。我们还将探讨 Arduino 环境作为精简 C 代码的理想应用。为了最好地享受 Arduino 部分，你应该具备一些基本的电路构建经验，并且能够使用 LED 和电阻等元件。

这里是各章的预览：

第一章，*C 语言的 ABC*

对 C 语言历史的简要回顾以及设置开发环境的步骤。

第二章，*存储和声明*

介绍了 C 语言中的语句，包括基本 I/O、变量和运算符。

第三章，*控制流*

在这里，我将介绍分支和循环语句，并深入探讨变量及其作用域。

第四章，*位和（许多）字节*

快速回顾数据存储。我会展示 C 语言用于操作单个位和在数组中存储大量更大数据的设施。

第五章，*函数*

我会看如何将你的代码分解成可管理的块。

第六章，*指针和引用*

进一步进行，我创建更复杂的数据结构，并学习如何将它们传递给函数并从函数中返回。

第七章，*库*

学习如何找到并使用可以帮助您完成常见或复杂任务的流行代码片段。

第八章，*使用 Arduino 的真实世界 C*

真正的乐趣开始了！我们将设置 Arduino 开发环境并让一些 LED 闪烁。

第九章，*更小系统*

通过完整的 Arduino 项目尝试几个电子外设，包括传感器、按钮和 LCD 显示器。

第十章，*更快的代码*

学习一些编写代码的技巧，特别设计以帮助小处理器充分利用其资源。

第十一章，*自定义库*

借助编写友好且文档完备的库的技巧和技巧，构建您的 C 库技能，与 Arduino IDE 兼容。

第十二章，*下一步*

尝试一个快速的物联网项目，附带一些思考和一些关于在继续改进您的精益编码技能时尝试的想法。

附录包括一系列方便的链接，指向我使用的硬件和软件，以及有关下载和配置本书中显示的 C 和 Arduino 示例的信息。

# 本书使用的约定

本书中使用以下排版约定：

*斜体*

表示新术语、网址、电子邮件地址、文件名和文件扩展名。

`常量宽度`

用于程序清单，以及在段落内引用程序元素，如变量或函数名称、数据库、数据类型、环境变量、语句和关键字。

**`常量宽度粗体`**

显示用户应按字面意义键入的命令或其他文本。

*`常量宽度斜体`*

显示应由用户提供值或由上下文确定的值替换的文本。

###### 提示

此元素表示提示或建议。

###### 注意

此元素表示一般说明。

###### 警告

此元素表示警告或注意事项。

# 使用代码示例

本书中的许多代码示例非常简洁，您经常会受益于手动输入它们。但这并不总是有趣，有时您希望从已知的工作副本开始并修改内容。您可以从 GitHub 上获取所有示例的源代码，网址为[*https://github.com/l0y/smallerc*](https://github.com/l0y/smallerc)。附录 A 提供了有关下载代码和设置文件以供开发环境使用的详细说明。

如果您有技术问题或使用代码示例时遇到问题，请发送电子邮件至*bookquestions@oreilly.com*。

本书旨在帮助您完成工作。一般情况下，您可以在程序和文档中使用本书提供的示例代码，无需征得我们的许可，除非您复制了大量代码。例如，编写一个使用本书多个代码片段的程序并不需要许可。销售或分发来自 O’Reilly 图书的示例则需要许可。引用本书并引用示例代码回答问题则不需要许可。将本书大量示例代码整合到产品文档中则需要许可。

我们感谢，但通常不需要署名。署名通常包括标题、作者、出版商和 ISBN。例如：“*Smaller C* by Marc Loy (O’Reilly). Copyright 2021 Marc Loy, 978-1-098-10033-9.”

如果您认为您使用的代码示例超出了合理使用范围或上述许可，请随时通过*permissions@oreilly.com* 联系我们。

# O’Reilly 在线学习

###### 注意

超过 40 年来，[*O’Reilly Media*](http://oreilly.com) 提供技术和商业培训，为企业成功提供知识和见解。

我们独特的专家和创新者网络通过书籍、文章和我们的在线学习平台分享他们的知识和专长。O’Reilly 的在线学习平台为您提供按需访问的现场培训课程、深入学习路径、互动编码环境以及来自 O’Reilly 和其他 200 多家出版商的大量文本和视频。欲了解更多信息，请访问[*http://oreilly.com*](http://oreilly.com)。

# 如何联系我们

请将有关本书的评论和问题发送给出版商：

+   O’Reilly Media, Inc.

+   1005 Gravenstein Highway North

+   Sebastopol, CA 95472

+   800-998-9938（美国或加拿大）

+   707-829-0515（国际或当地）

+   707-829-0104（传真）

我们为本书设有一个网页，列出勘误、示例和任何额外信息。您可以访问[*https://oreil.ly/smaller-c*](https://oreil.ly/smaller-c)。

发送电子邮件至*bookquestions@oreilly.com* 评论或询问有关本书的技术问题。

有关我们图书和课程的新闻和信息，请访问[*http://oreilly.com*](http://oreilly.com)。

在 Facebook 上找到我们：[*http://facebook.com/oreilly*](http://facebook.com/oreilly)。

在 Twitter 上关注我们：[*http://twitter.com/oreillymedia*](http://twitter.com/oreillymedia)。

在 YouTube 上观看我们：[*http://youtube.com/oreillymedia*](http://youtube.com/oreillymedia)。

# 致谢

我要感谢艾米莉亚·布莱文斯（Amelia Blevins）在出版过程中的悉心引导。她的项目管理技能仅次于她通过巧妙建议改进我的写作。同样感谢阿曼达·奎因（Amanda Quinn）和苏珊·麦克奎德（Suzanne McQuade）在一开始就帮助我推动项目，以及丹尼·埃尔方鲍姆（Danny Elfanbaum）提供的出色技术支持。O’Reilly 的整个团队无与伦比。

我的技术审阅者们带来了广泛的专业知识，我感到非常感激他们提供的反馈。托尼·克劳福德（Tony Crawford）调整了我的 C 语言讨论，我衷心推荐您阅读他的书籍：[*C in a Nutshell*](https://www.oreilly.com/library/view/c-in-a/0596006977/)。亚历克斯·法伯（Alex Faber）在多个平台上运行了书中的每个示例，并确保我牢记新程序员的需求。埃里克·范胡斯（Eric Van Hoose）使我的写作更加清晰，并帮助集中整本书的内容流程。海姆·克劳斯（Chaim Krause）在最后一刻提供了帮助，并指出了一些需要填补的空白。

特别感谢我的丈夫罗恩（Ron）在言辞建议和全面道义支持方面的贡献。雷格·戴克（Reg Dyck）也给予了我一些宝贵的鼓励。如果你真的想要深入学习一个主题，试着向像雷格和罗恩这样的朋友和家人解释它。尽管两位先生对编程或电子技术并不感兴趣，但他们友好的提问帮助我梳理了许多困难话题的核心内容。
