<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" class="pagenumrestart" data-pdf-bookmark="Chapter 1. The ABCs of C"><div class="chapter" id="smallerc-CHP-1">
<h1><span class="label">Chapter 1. </span>The ABCs of C</h1>


<p>C is a powerful language. It is <a data-type="indexterm" data-primary="procedural languages, defined" id="idm45018747770552"/>procedural (meaning you do a lot of your coding work with procedures) and <a data-type="indexterm" data-primary="compiled languages, defined" id="idm45018747769656"/>compiled (meaning the code you write must be translated for use by a computer using a compiler). You can write your procedures anywhere you can edit a text file, and you can compile those procedures to run on anything from supercomputers to the tiniest of embedded controllers. It’s a fantastic, mature language—I’m glad you’re here learning about it!</p>

<p>C has been around for quite some time: it was developed in the early 1970s by Dennis Ritchie at Bell Labs. You might have heard of him as one of the authors of the canonical C programming book, <em>The C Programming Language</em> with <a data-type="indexterm" data-primary="Ritchie, Dennis" id="idm45018747767240"/><a data-type="indexterm" data-primary="Kernighan, Brian" id="idm45018747455336"/><a data-type="indexterm" data-primary="The C Programming Language (Kernighan and Ritchie)" data-primary-sortas="C Programming Language Kernighan" id="idm45018747454664"/>Brian Kernighan 
<span class="keep-together">(Pearson).</span> (If you see or hear or read about the phrase “K&amp;R” in the programming world, that’s a reference to the book.) As a general purpose, procedural language built with an eye toward keeping programmers connected to the hardware their programs would run on, C caught on with both academic and industrial institutions outside Bell Labs to run a growing array of computers and remains a viable systems 
<span class="keep-together">programming</span> language.</p>

<p>Like all languages, C is not static. And with nearly 50 years under its belt, C
has undergone many changes and spawned a great number of other languages. You can see its influence in the syntax of languages as disparate as Java and Perl. Indeed, some of C’s elements are so universal that you see it show up in pseudocode examples meant to represent “any” language.</p>

<p>As C grew in popularity, it became necessary to organize and standardize its syntax
and features. The first part of this book will focus on
<a href="https://oreil.ly/9MDKn">Standard C</a> as defined by
the International Organization for Standardization (ISO) and <a data-type="indexterm" data-primary="Standard C" id="idm45018747449624"/><a data-type="indexterm" data-primary="standards for C" id="idm45018747448920"/><a data-type="indexterm" data-primary="International Organization for Standardization (ISO)" id="idm45018747448248"/><a data-type="indexterm" data-primary="ISO (International Organization for Standardization)" id="idm45018747447544"/><a data-type="indexterm" data-primary="C programming language" data-secondary="standards" id="idm45018747446840"/>the code we
write will be portable to any C compiler on any platform. The latter 
<span class="keep-together">part of</span> this book
will focus on using C with specific hardware such as the Arduino 
<span class="keep-together">microcontroller</span>.</p>






<section data-type="sect1" data-pdf-bookmark="Strengths and Weaknesses"><div class="sect1" id="smallerc-CHP-1-SECT-1">
<h1>Strengths and Weaknesses</h1>

<p>When you<a data-type="indexterm" data-primary="C programming language" data-secondary="strengths and weaknesses" id="idm45018747442552"/> think about solving actual problems with a
computer these days, using a high-level language is a must. C provides a great balance
between code you can think about and code that performs well when compiled for actual
hardware. C has straightforward code structures and a wealth of useful
operators. (These are the features that have spread into so many subsequent languages
and makes it such a good option for lean code on microcontrollers.) C
also gives you room to break problems up into smaller subproblems. You can reason
about the code (and its inevitable bugs) as a human—quite a handy thing.</p>

<p>C does have its downsides, though. C does not have some of the fancier features
available today in other languages such as Java’s automatic memory garbage collection.
Many modern languages hide most of those details from the programmer at the expense
of a little performance. C requires you to be more deliberate in
how you 
<span class="keep-together">allocate</span> and manage resources like memory. Sometimes that requirement can
feel 
<span class="keep-together">tedious</span>.</p>

<p>C also lets you write some pretty impressive bugs. It has no type safety or
really any safety checks at all. Again, as a programmer, this hands-off
approach means you can write clever, efficient code that really hums on
the hardware. It also means that if you
get something wrong, it’s up to you to find and fix the problem. (Tools like
linters and debuggers help; we’ll definitely be looking at those along the way.)</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Getting Started"><div class="sect1" id="smallerc-CHP-1-SECT-2">
<h1>Getting Started</h1>

<p>So<a data-type="indexterm" data-primary="C programming language" data-secondary="requirements for" id="c-require"/><a data-type="indexterm" data-primary="requirements for C" id="require-c"/><a data-type="indexterm" data-primary="software requirements" data-see="requirements for C" id="idm45018747433512"/> how do we get started? As with any compiled language, we’ll first need a file
containing some valid C instructions. We’ll then need a compiler that can
translate those instructions. With the right contents in the file and a compiler
for your own computer’s hardware, you can have a C program running in just a
few minutes.</p>

<p>If you have spent any time learning any computer language at all, you’re likely
familiar with the idea of <a data-type="indexterm" data-primary="&quot;Hello, World!&quot; programs" data-secondary="described" data-primary-sortas="Hello, World" id="idm45018747431576"/>a “Hello, World” program. It’s an admirably simple
idea: create a tiny program that proves several things in one go. It proves you
can write valid code in the language. It proves your compiler or interpreter
works. It also proves you can produce visible output, which comes in very handy
for humans, as it turns out. Let’s get started!</p>








<section data-type="sect2" data-pdf-bookmark="Tools Required"><div class="sect2" id="smallerc-CHP-1-SECT-2.1">
<h2>Tools Required</h2>

<p>Folks use computers today for a vast array of tasks. Entertainment such as
games and streaming video takes up as many (if not more) CPU cycles as
business productivity work or even application development. And because
computers are used as much for consuming as they are for producing, very
few systems come with the tools required to do stuff like application development.
Happily, those tools are freely available, but you do have to go get them yourself and then set them up to work on your system.</p>

<p>As I’ve noted before, this book focuses on writing clean, efficient C
code. I take care in our examples to avoid overly clever patterns. I
also work hard to ensure the examples do not rely on a particular compiler
or a particular development platform. To that end, I’ll be working with
the minimum setup required for any software development: a good editor
and a good compiler.<sup><a data-type="noteref" id="idm45018747426616-marker" href="ch01.xhtml#idm45018747426616">1</a></sup></p>

<p>If you’re comfortable hunting down software online and want to dive right in,
we’ll be installing <a href="https://oreil.ly/kXf3h">Visual Studio Code</a>
(often just “VS Code”) from Microsoft as our editor and the
<a href="https://oreil.ly/xclHh">GNU developer tools</a> from the GNU
Foundation to handle compiling. More links and details follow, but feel free
to jump to <a data-type="xref" href="#smallerc-CHP-1-SECT-2.2">“Creating a C ‘Hello, World’”</a> after installing these tools on your own or if
you already have an editor and a compiler you’re comfortable <a data-type="indexterm" data-primary="C programming language" data-secondary="requirements for" data-startref="c-require" id="idm45018747422920"/><a data-type="indexterm" data-primary="requirements for C" data-startref="require-c" id="idm45018747421704"/>using.</p>










<section data-type="sect3" data-pdf-bookmark="Windows"><div class="sect3" id="smallerc-CHP-1-SECT-2.1.1">
<h3>Windows</h3>

<p>Microsoft Windows<a data-type="indexterm" data-primary="C programming language" data-secondary="requirements for" data-tertiary="in Windows" data-tertiary-sortas="Windows" id="c-require-windows"/><a data-type="indexterm" data-primary="requirements for C" data-secondary="in Windows" data-secondary-sortas="Windows" id="require-c-windows"/><a data-type="indexterm" data-primary="Windows" data-secondary="C tools for" id="windows-ctools"/> owns the lion’s share of the desktop market. If you only
write programs for one system, Windows gets you the most bang for your buck.
But that means that you’ll find a lot more competition in the software that helps you write those programs. There are more commerical developer
applications for Windows than any other platform. Fortunately, many of those
applications have a free or “community” version that will suffice for our
purposes. (When we get to the Arduino focus in the second part of this book,
we’ll be looking at some Arduino-specific tools that include compilers.)</p>

<p>You can’t talk about Windows and software development without mentioning
the <a data-type="indexterm" data-primary="Visual Studio IDE" id="idm45018747692616"/>Visual Studio IDE (Integrated Development Environment) from Microsoft.
If you want to build applications for Windows itself, it’s hard to beat Visual Studio. They even offer a community edition for students and individual developers. While I won’t be discussing either edition for the examples in this book, Visual Studio is a great IDE for Windows users and will easily handle our code. (I will, however, be using a close cousin called Visual Studio Code <a data-type="indexterm" data-primary="Visual Studio Code" id="idm45018747691304"/>as our editor on all three of the major platforms.)</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>Another <a data-type="indexterm" data-primary="CLion" id="idm45018747689432"/>popular commerical IDE
is <a href="https://oreil.ly/E1Oxh">CLion</a> from Jetbrains. CLion is
also cross-platform so you can easily move between different
operating systems and still feel productive. If you have
experience with any of the other quality applications from Jetbrains,
CLion can be a familiar way to get started writing and debugging C code.</p>
</div>

<p>There are myriad other text editors, each with some pros and cons. You can even
use tools like the<a data-type="indexterm" data-primary="Notepad (Windows editor)" id="idm45018747686856"/> built-in Notepad application, although programming-specific editors will
have some handy features that can make reading and debugging your code easier.</p>












<section data-type="sect4" data-pdf-bookmark="GNU tools on Windows"><div class="sect4" id="smallerc-CHP-1-SECT-2.1.1.1">
<h4>GNU tools on Windows</h4>

<p>On <a data-type="indexterm" data-primary="GCC tool, installing" data-secondary="in Windows" data-secondary-sortas="Windows" id="gcc-install-windows"/><a data-type="indexterm" data-primary="installing" data-secondary="GCC tool" data-tertiary="in Windows" data-tertiary-sortas="Windows" id="install-gcc-windows"/><a data-type="indexterm" data-primary="downloading" data-secondary="GCC tool" data-tertiary="in Windows" data-tertiary-sortas="Windows" id="downloading-gcc-windows"/><a data-type="indexterm" data-primary="Cygwin environment, installing" id="Cygwin-install"/>Windows, installing the GCC tool from GNU can be a bit tedious. There’s no quick, friendly installer.<sup><a data-type="noteref" id="idm45018747677048-marker" href="ch01.xhtml#idm45018747677048">2</a></sup> You can find a variety of
<a href="https://oreil.ly/atDoI">binary packages</a> that provide most
of what we need, but you still have to take care to download the GNU compiler
subpackages and then configure your Windows environment.</p>

<p>We will install the Cygwin environment to get our Windows version of GCC. Cygwin
is a much larger collection of tools and utilities that provides Windows users
with a nice Unix shell environment. But “nice” is pretty subjective,
and if you don’t know Unix or its derivatives such as Linux or modern macOS, you probably won’t use much else of the collection.</p>

<p>Grab the <a href="https://oreil.ly/Loj7l">Cygwin setup</a> executable. Once it’s done downloading, go ahead and launch it. You may need to “allow this app from an unknown publisher to make changes to your device.” You can try the “Install from Internet” option, but if you have any trouble, go back and use the “Download Without Installing” option. You’ll still want to follow the package selection step, but after the download completes, you can run this installer program a second time and choose the “Install from Local Directory” option and use the folder where you downloaded all of the packages.</p>

<p>Go ahead and accept the defaults for any questions the installer asks. When you
get to the mirror selection page, use one physically close to you if you can identify a university or business you know. Otherwise, any mirror should do—but it’s OK to come back and pick a different one if you have any troubles with the download.</p>

<p>On the “Select Package” screen, you do need to make an extra selection as <code>gcc</code> is not included by default. Switch the View dropdown to “Full” and then enter “gcc” as a search term. You want the “gcc-core” package as highlighted in <a data-type="xref" href="#smallerc-CHP-1-FIG-cygwin-pkg-select">Figure 1-1</a>. Any of the versions available are sufficient for our needs. At the time of this writing, we selected the most recent gcc-core version, which was 10.2.0-1.</p>

<figure><div id="smallerc-CHP-1-FIG-cygwin-pkg-select" class="figure">
<img src="Images/smac_0101.png" alt="smac 0101" width="2127" height="1271"/>
<h6><span class="label">Figure 1-1. </span>Selecting the Cygwin GCC package</h6>
</div></figure>

<p>Confirm your selections on the Review page and start the download! It may take a little time to download and install everything, but you should eventually hit the Finish screen. You can add the desktop icon if you want to play around with a Unix-like command prompt, but it is not required for the work we’ll be doing. What is required, though, is an extra step to add the Cygwin tools to Microsoft’s command prompt.</p>

<p>You may wish to search online for a guided tour of creating and <a data-type="indexterm" data-primary="Windows" data-secondary="environment variables, editing" id="Windows-env-edit"/><a data-type="indexterm" data-primary="environment variables in Windows, editing" data-secondary-sortas="Windows" id="env-windows-edit"/><a data-type="indexterm" data-primary="editing" data-secondary="Windows environment variables" id="edit-win-env"/>editing Windows
environment variables, but here are the basics. (If you’ve done this type of thing
before, feel free to skip to the Cygwin folder selection and just put that in your path.)</p>

<p>From the Start menu, search for “env” and you should quickly see an option to
edit the system environment variables at the top, as shown in <a data-type="xref" href="#smallerc-CHP-1-FIG-win-search-env">Figure 1-2</a>.</p>

<p>The System Properties dialog should open, and you want to click the “Environment Variables…” button near the bottom right corner, as shown in <a data-type="xref" href="#smallerc-CHP-1-FIG-win-props-env">Figure 1-3</a>.</p>

<figure class="width-80"><div id="smallerc-CHP-1-FIG-win-search-env" class="figure">
<img src="Images/smac_0102.png" alt="smac 0102" width="800" height="600"/>
<h6><span class="label">Figure 1-2. </span>Finding the environment variable editor in Windows</h6>
</div></figure>

<figure class="width-80"><div id="smallerc-CHP-1-FIG-win-props-env" class="figure">
<img src="Images/smac_0103.png" alt="smac 0103" width="800" height="600"/>
<h6><span class="label">Figure 1-3. </span>The System Properties dialog in Windows</h6>
</div></figure>

<p class="pagebreak-before less_space">You can set just your path or set it system wide. Highlight the PATH entry you want to update and then click Edit. Next, click the New button on the “Edit environment variables” dialog and then click the Browse button to navigate to the Cygwin <em>bin</em> folder, as shown in <a data-type="xref" href="#smallerc-CHP-1-FIG-win-cygwin-path">Figure 1-4</a>. (If you recall the root folder you chose for the Cygwin installer to put everything in, you can also just type that in, of course.)</p>

<figure><div id="smallerc-CHP-1-FIG-win-cygwin-path" class="figure">
<img src="Images/smac_0104.png" alt="smac 0104" width="800" height="600"/>
<h6><span class="label">Figure 1-4. </span>Adding the Cygwin <em>bin</em> folder to the Path environment variable</h6>
</div></figure>

<p>Select the OK button to close each of the dialogs and you should<a data-type="indexterm" data-primary="Windows" data-secondary="environment variables, editing" data-startref="Windows-env-edit" id="idm45018747405096"/><a data-type="indexterm" data-primary="environment variables in Windows, editing" data-startref="env-windows-edit" id="idm45018747403832"/><a data-type="indexterm" data-primary="editing" data-secondary="Windows environment variables" data-startref="edit-win-env" id="idm45018747402792"/> be set!</p>

<p>For the editor, <a data-type="indexterm" data-primary="installing" data-secondary="Visual Studio Code" data-tertiary="on Windows" data-tertiary-sortas="Windows" id="idm45018747401016"/><a data-type="indexterm" data-primary="Visual Studio Code" data-secondary="installing" data-tertiary="on Windows" data-tertiary-sortas="Windows" id="idm45018747399464"/><a data-type="indexterm" data-primary="Windows" data-secondary="Visual Studio Code, installing" id="idm45018747397976"/>you can
find <a href="https://oreil.ly/27eCl">VS Code</a> at the Visual Studio site.
Depending on your system, you will most likely want either the 64-bit or 32-bit
user installer version.<sup><a data-type="noteref" id="idm45018747396056-marker" href="ch01.xhtml#idm45018747396056">3</a></sup></p>

<p>Use the Extensions view shown in <a data-type="xref" href="#smallerc-CHP-1-FIG-vs-c-ext-win">Figure 1-5</a>
to grab the <span class="keep-together">C/C++</span> extension. You can search for the simple letter “c,” but you might also see the extension right away on the “Popular” list. Go ahead and click the small green Install button for the extension.</p>

<figure><div id="smallerc-CHP-1-FIG-vs-c-ext-win" class="figure">
<img src="Images/smac_0105.png" alt="smac 0105" width="1418" height="987"/>
<h6><span class="label">Figure 1-5. </span>The C extension in VS Code</h6>
</div></figure>

<p>Let’s test the GCC tool from those Cygwin utilities.
(You may need to restart Visual Studio Code for it to recognize your Cygwin tools.) From the View menu, select the Terminal option. The Terminal tab should open at the bottom. You may need to hit the Enter key to get a prompt. Run <strong><code>gcc --version</code></strong> at the prompt. Hopefully, you’ll see output similar to that in <a data-type="xref" href="#smallerc-CHP-1-FIG-vs-gcc-win">Figure 1-6</a>.</p>

<p>You should see the version number matching the package you selected as you were
installing Cygwin. If you do, hooray! Jump down to <a data-type="xref" href="#smallerc-CHP-1-SECT-2.2">“Creating a C ‘Hello, World’”</a> and get started with your first C program. If you don’t see any output or get a “not recognized” error, review the steps to set up Windows environment variables. And as always, searching online for particular errors you see can help you solve most installation and setup <a data-type="indexterm" data-primary="GCC tool, installing" data-secondary="in Windows" data-secondary-sortas="Windows" data-startref="gcc-install-windows" id="idm45018747386456"/><a data-type="indexterm" data-primary="installing" data-secondary="GCC tool" data-tertiary="in Windows" data-tertiary-sortas="Windows" data-startref="install-gcc-windows" id="idm45018747384968"/><a data-type="indexterm" data-primary="downloading" data-secondary="GCC tool" data-tertiary="in Windows" data-tertiary-sortas="Windows" data-startref="downloading-gcc-windows" id="idm45018747383208"/><a data-type="indexterm" data-primary="Cygwin environment, installing" data-startref="Cygwin-install" id="idm45018748020328"/><a data-type="indexterm" data-primary="C programming language" data-secondary="requirements for" data-tertiary="in Windows" data-tertiary-sortas="Windows" data-startref="c-require-windows" id="idm45018748019368"/><a data-type="indexterm" data-primary="requirements for C" data-secondary="in Windows" data-secondary-sortas="Windows" data-startref="require-c-windows" id="idm45018748017608"/><a data-type="indexterm" data-primary="Windows" data-secondary="C tools for" data-startref="windows-ctools" id="idm45018748016120"/>issues.</p>

<figure><div id="smallerc-CHP-1-FIG-vs-gcc-win" class="figure">
<img src="Images/smac_0106.png" alt="smac 0106" width="2130" height="1326"/>
<h6><span class="label">Figure 1-6. </span>Testing GCC in the Terminal tab</h6>
</div></figure>
</div></section>

</div></section>













<section data-type="sect3" data-pdf-bookmark="macOS"><div class="sect3" id="smallerc-CHP-1-SECT-2.1.2">
<h3>macOS</h3>

<p>If <a data-type="indexterm" data-primary="C programming language" data-secondary="requirements for" data-tertiary="in macOS" data-tertiary-sortas="macOS" id="c-require-macOS"/><a data-type="indexterm" data-primary="requirements for C" data-secondary="in macOS" data-secondary-sortas="Windows" id="require-c-macOS"/><a data-type="indexterm" data-primary="macOS" data-secondary="C tools for" id="macOS-ctools"/><a data-type="indexterm" data-primary="GCC tool, installing" data-secondary="in macOS" data-secondary-sortas="macOS" id="gcc-install-macos"/><a data-type="indexterm" data-primary="installing" data-secondary="GCC tool" data-tertiary="in macOS" data-tertiary-sortas="macOS" id="install-gcc-macos"/><a data-type="indexterm" data-primary="downloading" data-secondary="GCC tool" data-tertiary="in macOS" data-tertiary-sortas="macOS" id="downloading-gcc-macos"/><a data-type="indexterm" data-primary="Terminal app (macOS)" id="terminal"/>you live mostly with graphical applications and tools, you might not be aware of the Unix underpinnings of macOS. While you can mostly remain blissfully ignorant of those underpinnings, it is useful to know a bit about navigating the world from a command prompt. We’ll be using the <code>Terminal</code> app to download and install GCC, but as with Windows, it is worth noting that Apple’s official developer tool, <a data-type="indexterm" data-primary="Xcode" id="xcode"/>Xcode, can be used to write and compile C code. Fortunately we don’t need all of Xcode to get going with C, so we’ll stick to the minimum.</p>

<p>The Terminal app is in the Application → Utilities folder. Go ahead and start it.
You should see something like <a data-type="xref" href="#smallerc-CHP-1-FIG-mac-terminal">Figure 1-7</a>.</p>

<figure><div id="smallerc-CHP-1-FIG-mac-terminal" class="figure">
<img src="Images/smac_0107.png" alt="smac 0107" width="1170" height="730"/>
<h6><span class="label">Figure 1-7. </span>A basic macOS Terminal window</h6>
</div></figure>

<p>If you already have the main Apple programming application, Xcode, you can
quickly check to see if GCC is also available. Try running <strong><code>gcc -v</code></strong>:</p>

<pre data-type="programlisting">$ gcc -v
Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with...
Apple clang version 11.0.3 (clang-1103.0.32.62)
Target: x86_64-apple-darwin19.6.0
Thread model: posix
InstalledDir: /Library/Developer/CommandLineTools/usr/bin</pre>

<p>The exact versions aren’t that important; we just want to make sure GCC is in
fact available. If not, you’ll need to install the <code>xcode-select</code> command-line tool, which will bring GCC along for the ride. Type in <strong><code>xcode-select --install</code></strong> and follow the prompts. A dialog will ask if you want to install the command-line tools; say yes and you’re on your way.</p>

<p>After the installation completes, go ahead and run that <strong><code>gcc -v</code></strong> command to make sure you have the compiler. If you don’t get a good response, you may need to visit <a href="https://oreil.ly/JyXV8">Apple’s Developer Support site</a> and <a data-type="indexterm" data-primary="Xcode" data-startref="xcode" id="idm45018747989640"/>search on “command-line tools.”</p>

<p>Installing<a data-type="indexterm" data-primary="Visual Studio Code" data-secondary="installing" data-tertiary="on macOS" data-tertiary-sortas="macOS" id="VSCode-install-macos"/><a data-type="indexterm" data-primary="installing" data-secondary="Visual Studio Code" data-tertiary="on macOS" data-tertiary-sortas="macOS" id="install-VScode-macos"/> VS Code on macOS is much simpler. Visit the same
<a href="https://oreil.ly/kUgwI">VS Code downloads</a> page at the Visual Studio site. Select the macOS download. You should receive a ZIP file in your standard download folder. Double-click that file to unzip it, and then drag the resulting <em>Visual Studio Code.app</em> file to your <em>Applications</em> folder. If you are prompted for your password to move the app to <em>Applications</em>, go ahead and provide it now.</p>

<p>Once relocated, go ahead and open VS Code. We want to add the C/C++ extension and then
check that we can access GCC from the Terminal tab.</p>

<p>Pull up the Extensions panel in<a data-type="indexterm" data-primary="Visual Studio Code" data-secondary="installing" data-tertiary="on macOS" data-tertiary-sortas="macOS" data-startref="VSCode-install-macos" id="idm45018747981160"/><a data-type="indexterm" data-primary="installing" data-secondary="Visual Studio Code" data-tertiary="on macOS" data-tertiary-sortas="macOS" data-startref="install-VScode-macos" id="idm45018747979368"/> VS Code by clicking the “boxes” icon shown in
<a data-type="xref" href="#smallerc-CHP-1-FIG-vs-c-ext-mac">Figure 1-8</a>. You can search for the simple letter “C”
and likely find the correct extension at the top of the results.</p>

<figure><div id="smallerc-CHP-1-FIG-vs-c-ext-mac" class="figure">
<img src="Images/smac_0108.png" alt="smac 0108" width="1801" height="1173"/>
<h6><span class="label">Figure 1-8. </span>VS Code extensions</h6>
</div></figure>

<p>To try out the Terminal tab, open it from the View → Terminal menu item. You should see a new section at the bottom of your editor space. Go ahead and try running our GCC check command (<strong><code>gcc -v</code></strong>) in that new area. You should see results similar to <a data-type="xref" href="#smallerc-CHP-1-FIG-vs-gcc-mac">Figure 1-9</a>.</p>

<figure><div id="smallerc-CHP-1-FIG-vs-gcc-mac" class="figure">
<img src="Images/smac_0109.png" alt="smac 0109" width="1803" height="1174"/>
<h6><span class="label">Figure 1-9. </span>Trying GCC in VS Code on macOS</h6>
</div></figure>

<p>Again, if you don’t get the expected results from running the <code>gcc</code> command, check Apple’s developer site. You can also find several video tutorials online that may help you with your particular <a data-type="indexterm" data-primary="C programming language" data-secondary="requirements for" data-tertiary="in macOS" data-tertiary-sortas="macOS" data-startref="c-require-macOS" id="idm45018742075704"/><a data-type="indexterm" data-primary="requirements for C" data-secondary="in macOS" data-secondary-sortas="Windows" data-startref="require-c-macOS" id="idm45018742073912"/><a data-type="indexterm" data-primary="macOS" data-secondary="C tools for" data-startref="macOS-ctools" id="idm45018742072424"/><a data-type="indexterm" data-primary="GCC tool, installing" data-secondary="in macOS" data-secondary-sortas="macOS" data-startref="gcc-install-macos" id="idm45018742071208"/><a data-type="indexterm" data-primary="installing" data-secondary="GCC tool" data-tertiary="in macOS" data-tertiary-sortas="macOS" data-startref="install-gcc-macos" id="idm45018742069720"/><a data-type="indexterm" data-primary="downloading" data-secondary="GCC tool" data-tertiary="in macOS" data-tertiary-sortas="macOS" data-startref="downloading-gcc-macos" id="idm45018742067960"/><a data-type="indexterm" data-primary="Terminal app (macOS)" data-startref="terminal" id="idm45018742066200"/>setup.</p>
</div></section>













<section data-type="sect3" data-pdf-bookmark="Linux"><div class="sect3" id="smallerc-CHP-1-SECT-2.1.3">
<h3>Linux</h3>

<p>Many<a data-type="indexterm" data-primary="C programming language" data-secondary="requirements for" data-tertiary="in Linux" data-tertiary-sortas="Linux" id="c-require-Linux"/><a data-type="indexterm" data-primary="requirements for C" data-secondary="in Linux" data-secondary-sortas="Linux" id="require-c-Linux"/><a data-type="indexterm" data-primary="Linux" data-secondary="C tools for" id="Linux-ctools"/><a data-type="indexterm" data-primary="GCC tool, installing" data-secondary="in Linux" data-secondary-sortas="Linux" id="gcc-install-linux"/><a data-type="indexterm" data-primary="installing" data-secondary="GCC tool" data-tertiary="in Linux" data-tertiary-sortas="Linux" id="install-gcc-linux"/><a data-type="indexterm" data-primary="downloading" data-secondary="GCC tool" data-tertiary="in Linux" data-tertiary-sortas="Linux" id="downloading-gcc-linux"/> Linux systems are geared toward folks who tinker. You might already have GCC available. You can check quickly by starting the <code>Terminal</code> app and running the same check used on other operating systems. If <strong><code>gcc -v</code></strong> returns an answer—other than “Command not found,” of course—then you are good to go and can download VS Code. If you need to install GCC, you can use the package manager on your platform. You might have a nifty graphical application for such things; look for “developer tools” or “software development” and then read the description to see if GCC or GNU utilities are included.</p>

<p>For Debian/Ubuntu systems, you can grab the <code>build-essential</code> metapackage that will include
GCC along with lots of other useful (or required) libraries and tools:</p>

<pre data-type="programlisting">$ sudo apt install build-essential</pre>

<p class="pagebreak-before less_space">For Redhat/Fedora/CentOS systems, the Dandified Yum (<code>dnf</code>) tool can be used. We only need GCC for our work in this book:</p>

<pre data-type="programlisting">$ su -
# dnf install gcc</pre>

<p>Although if you’re curious about software development in general, you might want
to grab the “Development Tools” group package, which includes GCC along with lots of other nifty things:</p>

<pre data-type="programlisting">$ su -
# dnf groupinstall "Development Tools"</pre>

<p>Manjaro is another popular Linux distribution based on Arch Linux. You can use the
<code>pacman</code> tool here:</p>

<pre data-type="programlisting">$ su -
# pacman -S gcc</pre>

<p>If you have some other flavor of Linux that doesn’t use <code>apt</code>, <code>dnf</code>, or <code>pacman</code>, you can
easily search for “install gcc <strong>my-linux</strong>” or use the search option with your system’s
package manager to look for “gcc” or “gnu.”</p>

<p>As a Linux user, you may already have some experience with text editors for writing shell scripts or other languages. If you’re already comfortable with your editor and the terminal, you can skip forward. But if you are new to coding or don’t have a favorite editor, <a data-type="indexterm" data-primary="Visual Studio Code" data-secondary="installing" data-tertiary="on Linux" data-tertiary-sortas="Linux" id="idm45018742041944"/><a data-type="indexterm" data-primary="installing" data-secondary="Visual Studio Code" data-tertiary="on Linux" data-tertiary-sortas="Linux" id="idm45018742040424"/>go ahead and install VS Code. Visit the same <a href="https://oreil.ly/ptJFA">VS Code downloads</a> page at the Visual Studio site as mentioned for the other operating systems. Get the appropriate bundle for your system. (If your flavor of Linux doesn’t use <em>.deb</em> or <em>.rpm</em> files, you can get the <em>.tar.gz</em> version.)</p>

<p>Double-click the downloaded file and you should be prompted to go through a standard installation. You may be asked for an administrative password if you are installing VS Code for all users. Different distributions will put VS Code in different spots, and different desktops have different app launchers. You can also launch VS Code from the command line using the <code>code</code> command.</p>

<p>As with the other operating systems, we want to add the C/C++ extension and then
check that we can access GCC from the Terminal tab.</p>

<p>Pull up the Extensions panel in VS Code by clicking the “boxes” icon shown in <a data-type="xref" href="#smallerc-CHP-1-FIG-vs-c-ext-linux">Figure 1-10</a>. You can search for the simple letter “C” and likely find the correct extension at the top of the results.</p>

<figure><div id="smallerc-CHP-1-FIG-vs-c-ext-linux" class="figure">
<img src="Images/smac_0110.png" alt="smac 0110" width="1350" height="807"/>
<h6><span class="label">Figure 1-10. </span>VS Code extensions on Linux</h6>
</div></figure>

<p>To try out the Terminal tab, open it from the View → Terminal menu item. You should see a new section at the bottom of your editor space. Go ahead and try running our GCC check command (<strong><code>gcc -v</code></strong>) in that new area. You should see (verbose and slightly messy) results similar<a data-type="indexterm" data-primary="C programming language" data-secondary="requirements for" data-tertiary="in Linux" data-tertiary-sortas="Linux" data-startref="c-require-Linux" id="idm45018742030152"/><a data-type="indexterm" data-primary="requirements for C" data-secondary="in Linux" data-secondary-sortas="Linux" data-startref="require-c-Linux" id="idm45018742028392"/><a data-type="indexterm" data-primary="Linux" data-secondary="C tools for" data-startref="Linux-ctools" id="idm45018742026904"/><a data-type="indexterm" data-primary="GCC tool, installing" data-secondary="in Linux" data-secondary-sortas="Linux" data-startref="gcc-install-linux" id="idm45018742025688"/><a data-type="indexterm" data-primary="installing" data-secondary="GCC tool" data-tertiary="in Linux" data-tertiary-sortas="Linux" data-startref="install-gcc-linux" id="idm45018742024200"/><a data-type="indexterm" data-primary="downloading" data-secondary="GCC tool" data-tertiary="in Linux" data-tertiary-sortas="Linux" data-startref="downloading-gcc-linux" id="idm45018742022440"/> to <a data-type="xref" href="#smallerc-CHP-1-FIG-vs-gcc-linux">Figure 1-11</a>.</p>

<figure><div id="smallerc-CHP-1-FIG-vs-gcc-linux" class="figure">
<img src="Images/smac_0111.png" alt="smac 0111" width="1350" height="808"/>
<h6><span class="label">Figure 1-11. </span>Trying GCC in VS Code on Linux</h6>
</div></figure>

<p>Hooray, hooray. Hopefully, you have a simple C development environment up and running. Let’s go write some code!</p>
</div></section>



</div></section>













<section data-type="sect2" data-pdf-bookmark="Creating a C “Hello, World”"><div class="sect2" id="smallerc-CHP-1-SECT-2.2">
<h2>Creating a C “Hello, World”</h2>

<p>With <a data-type="indexterm" data-primary="&quot;Hello, World!&quot; programs" data-secondary="creating" data-primary-sortas="Hello, World" id="hello-create"/>your editor and compiler in place, we can try out the acclaimed first program many developers write in any new language: the “Hello, World” program. It is meant to show you can write valid code in the new language and that you can output information.</p>

<p>C, as a language, can be terse. We’ll be getting into all the nitty-gritty of
semicolons, curly braces, backslashes, and other strange symbols in this first program, but for now, copy this small bit of code verbatim. You can
create a new file in <a data-type="indexterm" data-primary="Visual Studio Code" data-secondary="files, creating" id="idm45018742013080"/>VS Code using a right-click in the Explorer on the left, or using the File → New File menu item, or by pressing Ctrl+N.</p>

<pre data-type="programlisting" data-code-language="c"><code class="cp">#include &lt;stdio.h&gt;</code>

<code class="kt">int</code> <code class="nf">main</code><code class="p">()</code> <code class="p">{</code>
  <code class="n">printf</code><code class="p">(</code><code class="s">"Hello, world</code><code class="se">\n</code><code class="s">"</code><code class="p">);</code>
<code class="p">}</code></pre>

<p>Go ahead and save the file and name it <em>hello.c</em>. We’ll also go ahead and open the
Terminal in VS Code (View → Terminal menu item or Ctrl+`). You should see
something similar to <a data-type="xref" href="#smallerc-CHP-1-FIG-vs-hw-1">Figure 1-12</a>.</p>

<figure><div id="smallerc-CHP-1-FIG-vs-hw-1" class="figure">
<img src="Images/smac_0112.png" alt="smac 0112" width="1350" height="807"/>
<h6><span class="label">Figure 1-12. </span>“Hello, World” and our Terminal tab</h6>
</div></figure>

<p>If you know other languages already then you can probably
guess what’s happening. Either way, let’s take a quick moment to review each line.
But don’t worry if some of these explanations feel opaque. Learning to program
requires a lot of practice and a lot of patience. Later chapters will help you reinforce
both skills.</p>

<pre data-type="programlisting" data-code-language="c"><code class="cp">#include &lt;stdio.h&gt;</code></pre>

<p>This line loads<a data-type="indexterm" data-primary="header files" data-secondary="described" id="idm45018746547384"/><a data-type="indexterm" data-primary="libraries" data-secondary="described" id="idm45018746568552"/> the <em>header file</em> for the “standard input/output” <em>library</em>. Libraries (roughly speaking) are external pieces of code that can be attached to your own code when you run <code>gcc</code>. Header files are succinct descriptions of these external entities. It’s a very common line for a very popular part of a very common library. Among other things, this header includes the definition of the <code>printf()</code> function <a data-type="indexterm" data-primary="printf() function" id="idm45018745654744"/><a data-type="indexterm" data-primary="functions" data-secondary="printf()" id="idm45018745077336"/>we use to get our actual output. Almost every C program you write will use it.
This line is always at the top of the file, although as we’ll see in <a data-type="xref" href="ch06.xhtml#smallerc-CHP-6">Chapter 6</a> you will often use several libraries, each with their own header file <code>#include</code> line.</p>
<pre data-type="programlisting" data-code-language="c">
<code class="kt">int</code> <code class="nf">main</code><code class="p">()</code> <code class="p">{</code>
</pre>

<p>Complex programs can have dozens (even hundreds or thousands) of separate C files. Separating big problems into tinier parts is a fundamental part of being a good programmer. These smaller “bites” are easier to debug and maintain. They also tend to help you find moments of repeated tasks where you can reuse code you have already written. But whether
you have a big, complex program, or a tiny, simple one, you need some place to start. This line is that starting place. The <code>main()</code> function<a data-type="indexterm" data-primary="main() function" id="idm45018747455640"/><a data-type="indexterm" data-primary="functions" data-secondary="main()" id="idm45018750058600"/> is always required, though it occasionally looks a little different. We’ll tackle <em>types</em> like the <code>int</code> you see at the beginning of the line in <a data-type="xref" href="ch02.xhtml#smallerc-CHP-2">Chapter 2</a> and look more closely at functions in <a data-type="xref" href="ch05.xhtml#smallerc-CHP-5">Chapter 5</a>. But pay attention to that <code>{</code> at the end of the line. That character opens<a data-type="indexterm" data-primary="blocks of code" id="idm45018743522888"/> a <em>block</em> of
code.</p>

<pre data-type="programlisting" data-code-language="c">  <code class="n">printf</code><code class="p">(</code><code class="s">"Hello, world</code><code class="se">\n</code><code class="s">"</code><code class="p">);</code></pre>

<p>This statement is the heart of our program. Less romantically speaking, it represents<a data-type="indexterm" data-primary="body of code" id="idm45018745212712"/> the <em>body</em> of our <code>main()</code> function block. Blocks contain one or more lines of code bounded (in C) by curly braces, and we often refer to the content of any block as its body. This particular body does one thing: it uses the <code>printf()</code> function (again, defined in <em>stdio.h</em>) to produce a friendly, global greeting. We’ll be going through <code>printf()</code> and things like the <code>"Hello, world\n"</code> snippet in much more detail in <a data-type="xref" href="ch02.xhtml#smallerc-CHP-2-SECT-3">“printf() and scanf()”</a>.</p>

<p>I also want to quickly highlight<a data-type="indexterm" data-primary="semicolon (;), in C code" id="idm45018743341576"/><a data-type="indexterm" data-primary="; (semicolon), in C code" id="idm45018744978392"/> the semicolon at the end of the line. That bit of punctuation tells the C compiler when you have finished a statement. That marker doesn’t mean much here with only one statement in our block, but it will help down the road when we have more statements and statements that are messy enough to span several lines.</p>

<p class="pagebreak-before less_space">And <a data-type="indexterm" data-primary="curly braces ({})" data-secondary="in C code" data-secondary-sortas="C code" id="idm45018743318728"/><a data-type="indexterm" data-primary="{} (curly braces)" data-secondary="in C code" data-secondary-sortas="C code" id="idm45018747213352"/><a data-type="indexterm" data-primary="curly braces ({})" data-seealso="blocks of code" id="idm45018745715656"/><a data-type="indexterm" data-primary="{} (curly braces)" data-seealso="blocks of code" id="idm45018743636456"/>last but certainly not least, here is the “closing” curly brace to match up with the
“opening” curly brace two lines up:</p>
<pre data-type="programlisting" data-code-language="c">
<code class="p">}</code>
</pre>

<p>Every block will have these open/close braces. One of
the most common mistakes in programming is having one too many open or close braces.
Happily, most modern editors have fancy syntax highlighting that can help you match up
any pair of braces (and thus identify any braces that don’t have a partner<a data-type="indexterm" data-primary="&quot;Hello, World!&quot; programs" data-secondary="creating" data-primary-sortas="Hello, World" data-startref="hello-create" id="idm45018743032168"/> as well).</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Compiling Your Code"><div class="sect2" id="smallerc-CHP-1-SECT-2.3">
<h2>Compiling Your Code</h2>

<p>Now <a data-type="indexterm" data-primary="&quot;Hello, World!&quot; programs" data-secondary="compiling" data-primary-sortas="Hello, World" id="idm45018742008616"/><a data-type="indexterm" data-primary="compiling &quot;Hello, World!&quot; programs" id="idm45018742007368"/>we finally get to put all that software installation headache to use! In the Terminal
tab, run the following command:</p>

<pre data-type="programlisting">gcc hello.c</pre>

<p>If all goes well, you won’t see any output, just a new command prompt. If something <em>did</em>
go wrong, you’ll get an error message (or many messages) that hopefully point you to
what needs fixing. We’ll see debugging tricks as we encounter more examples, but for now,
look back at your code and the example above to see if you can spot any differences.</p>
<div data-type="tip"><h6>Tip</h6>
<p>If you are still having trouble with this first file, don’t give up! Check out <a data-type="xref" href="app01.xhtml#smallerc-APP-A">Appendix A</a>
on downloading the sample code for this book from GitHub. You can compile and run
the code as is, or use our examples as a starting point for your own tweaks and modifications.</p>
</div>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Running Your Code"><div class="sect2" id="smallerc-CHP-1-SECT-2.4">
<h2>Running Your Code</h2>

<p>After<a data-type="indexterm" data-primary="&quot;Hello, World!&quot; programs" data-secondary="running" data-primary-sortas="Hello, World" id="hello-run"/><a data-type="indexterm" data-primary="running &quot;Hello, World!&quot; programs" id="run-hello"/> successfully compiling our first C program, how do we test it? If you list the files in your directory, you’ll notice a new file named <em>a.out</em> on Linux and macOS systems, and <em>a.exe</em> on Windows systems. To run it, just type its name. On many Linux and macOS systems, your executable path may not include your working directory. In that case, use the local path prefix “./”. (The period means the current directory; the slash is just the standard path separator character.) <a data-type="xref" href="#smallerc-CHP-1-FIG-hello-mac-linux">Figure 1-13</a> shows the output.</p>

<figure><div id="smallerc-CHP-1-FIG-hello-mac-linux" class="figure">
<img src="Images/smac_0113.png" alt="smac 0113" width="1170" height="504"/>
<h6><span class="label">Figure 1-13. </span>Saying hello on macOS and Linux</h6>
</div></figure>

<p><a data-type="xref" href="#smallerc-CHP-1-FIG-hello-windows">Figure 1-14</a> shows the output on Windows.</p>

<figure><div id="smallerc-CHP-1-FIG-hello-windows" class="figure">
<img src="Images/smac_0114.png" alt="smac 0114" width="2128" height="1323"/>
<h6><span class="label">Figure 1-14. </span>Saying hello on Windows</h6>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>On<a data-type="indexterm" data-primary="Windows" data-secondary="executable files" id="idm45018743017336"/><a data-type="indexterm" data-primary="executable files (Windows)" id="idm45018743016328"/> Windows, the <em>.exe</em> suffix marks a file as executable. However, you do not
need to include the suffix when you run the program. You can just type <strong><code>a</code></strong>.
Depending on the command prompt application used (<code>cmd</code> or <code>PowerShell</code>, for example),
you may also need to use the local directory prefix similar to macOS or Linux
(<code>.\</code>).</p>
</div>

<p>As a name, though, “a” is pretty boring and definitely doesn’t tell us what the
program does. You <a data-type="indexterm" data-primary="files, renaming" id="idm45018742928744"/><a data-type="indexterm" data-primary="renaming files" id="idm45018742928040"/>can use the <code>-o</code> (output) option to the <code>gcc</code> command to specify a
better name for your program if you like.</p>

<p>On Linux and macOS:</p>

<pre data-type="programlisting">$ gcc hello.c -o hello</pre>

<p>On Windows:</p>

<pre data-type="programlisting">C:\&gt; gcc hello.c -o hello.exe</pre>

<p>Try that command and then look at the files in your folder. You should have a newly
minted <em>hello</em> (or <em>hello.exe</em>) file that you can run. Much<a data-type="indexterm" data-primary="&quot;Hello, World!&quot; programs" data-secondary="running" data-primary-sortas="Hello, World" data-startref="hello-run" id="idm45018742922664"/><a data-type="indexterm" data-primary="running &quot;Hello, World!&quot; programs" data-startref="run-hello" id="idm45018742921080"/> nicer.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="smallerc-CHP-1-SIDEBAR-1">
<h5>Distributing Your Code</h5>
<p>You <a data-type="indexterm" data-primary="&quot;Hello, World!&quot; programs" data-secondary="distributing" data-primary-sortas="Hello, World" id="idm45018742918024"/><a data-type="indexterm" data-primary="distributing &quot;Hello, World!&quot; programs" id="idm45018742916776"/>have a fully functioning C program compiled and ready to take over the world! How do you let someone else run your code? That question is unfortunately messy. If you want to share your <em>a.out</em> or <em>hello.exe</em> file with someone running the same operating system as you on similar hardware, you can just copy the program to their machine and it will work. But if you compiled your <em>hello.exe</em> on a Windows box and want to share it with a macOS user, you’re out of luck. We have compiled a<a data-type="indexterm" data-primary="native applications" id="idm45018742914200"/> native application.
Native applications can get the best performance out of your hardware, but that comes at the expense of needing a different compiled version (sometimes called a “binary”) for every platform you want to support.</p>

<p>You can certainly share your source code, though! If you email your <em>hello.c</em> file from Windows to Linux, or from macOS to Windows, or from an Ubuntu distro to Arch, the recipient can set up their own development environment and compile your code.</p>
</div></aside>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Next Steps"><div class="sect1" id="smallerc-CHP-1-SECT-3">
<h1>Next Steps</h1>

<p>Whew…that’s a lot of effort to get your computer to say hi! If it helps, it
took humanity eons to get the first computer to do what you just did. :) But now
that we have a working development environment, the next chapters will explore
the details of the C language and show you how to write, debug, and maintain
much more interesting programs. And with our microcontrollers, the popular term
for smaller computers typically used for dedicated tasks like reporting the current temperature or counting the number of boxes waiting on a conveyor belt, we’ll turn those interesting programs into interesting, physical creations!</p>
</div></section>







<div data-type="footnotes"><p data-type="footnote" id="idm45018747426616"><sup><a href="ch01.xhtml#idm45018747426616-marker">1</a></sup> Well, “any” is awfully expansive; if your language is an interpreted language, then of course you would need a good interpreter rather than a good compiler!</p><p data-type="footnote" id="idm45018747677048"><sup><a href="ch01.xhtml#idm45018747677048-marker">2</a></sup> J. M. Eubank, however, has done the legwork on a single-file installer that you might want to check out if the general steps for a more complete setup look overwhelming: <a href="https://oreil.ly/RWJcB">tdm-gcc</a>.</p><p data-type="footnote" id="idm45018747396056"><sup><a href="ch01.xhtml#idm45018747396056-marker">3</a></sup> If you’re unsure whether you have a 64-bit or 32-bit version of Windows, check out the <a href="https://oreil.ly/kyR5d">Microsoft FAQ</a>.</p></div></div></section></div></body></html>